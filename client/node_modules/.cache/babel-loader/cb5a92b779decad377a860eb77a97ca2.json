{"ast":null,"code":"import _classCallCheck from\"/Users/andrescampovalencia/Desktop/S_Proyectos/BackupShop2/13Dic2020 EcommerceAdmin/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrescampovalencia/Desktop/S_Proyectos/BackupShop2/13Dic2020 EcommerceAdmin/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/andrescampovalencia/Desktop/S_Proyectos/BackupShop2/13Dic2020 EcommerceAdmin/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/andrescampovalencia/Desktop/S_Proyectos/BackupShop2/13Dic2020 EcommerceAdmin/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/andrescampovalencia/Desktop/S_Proyectos/BackupShop2/13Dic2020 EcommerceAdmin/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from\"react\";import Select from\"react-select\";import Axios from\"axios\";import Header from\"../HeaderDash\";import Checkbox from\"@material-ui/core/Checkbox\";import Button from\"@material-ui/core/Button\";import{BootstrapTable,TableHeaderColumn}from\"react-bootstrap-table\";import\"./productShop.css\";import Progress from\"../progress\";var listaCategorias=[{label:\"Comida\",value:\"1\"},{label:\"UtenciliosEscolares\",value:\"2\"},{label:\"UtenciliosElectronicos\",value:\"3\"},{label:\"Vestuario\",value:\"4\"},{label:\"Calzado\",value:\"5\"},{label:\"Bebida\",value:\"6\"},{label:\"Productos para el hogar\",value:\"7\"},{label:\"Juguetes\",value:\"8\"}];// Start Functions of the Table\nvar selectRow={mode:\"radio\",clickToSelect:true};var cellEdit={mode:\"dbclick\",blurToSave:true// beforeSaveCell: onBeforeSaveCell, // a hook for before saving cell\n// afterSaveCell: onAfterSaveCell\n};var productCategoria=[\"Comida\",\"UtenciliosEscolares\",\"UtenciliosElectronicos\",\"Vestuario\",\"Calzado\",\"Bebida\",\"Productos para el hogar\",\"Juguetes\"];var productShop=/*#__PURE__*/function(_Component){_inherits(productShop,_Component);var _super=_createSuper(productShop);function productShop(props){var _this;_classCallCheck(this,productShop);_this=_super.call(this,props);_this.handleChange=function(selectedOption){_this.setState({selectedOption:selectedOption});console.log(\"Option selected:\",selectedOption);var a=selectedOption.label;var b=selectedOption.value;console.log(\"Option a label:\",a,\" // \",\"Option b value or id:\",b);var idLista={label:a,id:b};var urlA=\"/categoriaProducto\";Axios.post(urlA,idLista).then(function(res){console.log(\"desde handle\",res);_this.setState({listaProductosCategoria:res.data});}).catch(function(e){//\n});};_this.handleBuy=function(e){alert(\"Deseas realizar la compra de estos Productos ? \");e.preventDefault();var productsChecked=_this.state.optionsChecked;var numProductsChecked=_this.state.optionsChecked.length;if(numProductsChecked>0){var url=\"/buyProduct\";console.log(\"desde If handle buy\",productsChecked);var productsB={productsB:productsChecked};Axios.post(url,productsB).then(function(res){var auth=res.data;console.log(\"Respuesta de axios\"+auth.lenght);}).catch(function(e){//handle your errors\n});alert(\"Compra  Realizada\"+\"\\nPorfavor Ingrese en la pestaña Options a InfoProducto para continuar el proceso..\");_this.setState({optionsChecked:[],listaProductosCategoria:[]});}else{alert(\"Compra  No Realizada\"+\"\\nPorfavor inicie de nuevo el proceso..\");_this.setState({optionsChecked:[],listaProductosCategoria:[]});}};_this.fileSelectedHandler=function(event){console.log(\"el fileSelectedHandler\"+event.target.files[0]);_this.setState({selectedFile:event.target.files[0]});};_this.fileUploadHandler=function(){var formData=new FormData();var url=\"http://andresteccorp.club/TesisAndres/imagenUploadsProductos.php\";// get the idProducto from DB\nvar idProducto=_this.state.idProducto.map(function(item){return item.idUltimo+1;});console.log(\"desde fileUploadHandler\"+idProducto);formData.append(\"fileImageProducto\",_this.state.selectedFile);formData.set(\"idProducto\",idProducto);Axios.post(url,formData,{headers:{\"Content-Type\":\"multipart/form-data\"},onUploadProgress:function onUploadProgress(progressEvent){_this.setState({setUploadPorcentage:parseInt(Math.round(progressEvent.loaded*100/progressEvent.total))});// clear percentage\n//setTimeout(()=> setUploadPorcentage(0),10000);\n}}).then(function(res){console.log(\"Respuesta del Servidor Form\"+res.data);}).catch(function(e){//handle your errors\n});};_this.state={selectedOption:\" \",listaProductosCategoria:[],optionsChecked:[],evento:[],selectedFile:null,setUploadPorcentage:0,setUploadFile:\"\",productUpload:\"\",idProducto:\"\"};_this.handleBuy=_this.handleBuy.bind(_assertThisInitialized(_this));return _this;}_createClass(productShop,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"/maxIdProduct\").then(function(res){return res.json();}).then(function(idProducto){return _this2.setState({idProducto:idProducto},function(){return console.log(\"maxIdProduct fetched...\",idProducto);});});}},{key:\"handleInsertedRow\",value:function handleInsertedRow(row,cellName,cellValue){var newRowStr=\" \";for(var prop in row){newRowStr+=prop+\": \"+row[prop]+\" \\n\";}alert(\"El Nuevo Producto En Catalogo de la Plataforma :\\n\"+newRowStr);var CategoriaProducto=row.idCategoriaProducto===\"Comida\"?1:row.idCategoriaProducto===\"UtenciliosEscolares\"?2:row.idCategoriaProducto===\"UtenciliosElectronicos\"?3:row.idCategoriaProducto===\"Vestuario\"?4:row.idCategoriaProducto===\"Calzado\"?5:row.idCategoriaProducto===\"Bebida\"?6:row.idCategoriaProducto===\"Productos para el hogar\"?7:8;// Send Info to Server\nvar url=\"/storeProductUpload\";var productUpload={idCategoriaProducto:CategoriaProducto,nombreProducto:row.nombreProducto};console.log(\"Productos enviados al server\"+productUpload);// alert(\n//   \"Su producto ya se encuentra en InfoProducto \\n\" +\n//     \" Proceder a subir imagen para completar el proceso\"\n// );\nAxios.post(url,productUpload).then(function(res){if(res){console.log(\"Respuesta del Servidor Form\"+res.data);}console.log(\"No Respuesta del Servidor Form\"+res.data);}).catch(function(e){});}// Class that handle Selection Categories Products\n},{key:\"changeEvent\",// Function that handle input from the values of checkboxes\nvalue:function changeEvent(event){var checkedArray=this.state.optionsChecked;var selectedValue=event.target.value;var name=event.target.name;if(event.target.checked===true){checkedArray.push(selectedValue);this.setState({optionsChecked:checkedArray});}else{var valueIndex=checkedArray.indexOf(selectedValue);checkedArray.splice(valueIndex,1);this.setState({optionsChecked:checkedArray});}}// Function that gets list of products and send it to the server\n},{key:\"buttonImageUpload\",value:function buttonImageUpload(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",onChange:this.fileSelectedHandler}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this3.fileUploadHandler();},children:\"UploadFile\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:150,height:25,borderWidth:1,margin:10},children:/*#__PURE__*/_jsx(Progress,{percentage:this.state.setUploadPorcentage})})]});}},{key:\"render\",value:function render(){var _this4=this;var selectedOption=this.state.selectedOption;var options={afterTableComplete:this.handleTableComplete,afterDeleteRow:this.handleDeletedRow,afterInsertRow:this.handleInsertedRow};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Header,{title1:\"Informacion / Compra de Productos \",title2:\"Home\",ruta:\"/homeAdmin\",opcion1:\"InfoProducto\",rutaOpcion1:\"/tableProd\",opcion2:\"opcion2\",opcion3:\"opcion3\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:35,fontFamily:\"fantasy\",alignContent:\"center\",marginTop:\"20px\"},className:\"container\",children:/*#__PURE__*/_jsx(Select,{value:selectedOption,options:listaCategorias,onChange:this.handleChange})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:60,fontFamily:\"fantasy\",marginTop:\"50px\",marginLeft:\"100px\"},children:\"Articulos Disponibles\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{style:{fontSize:20,fontFamily:\"fantasy\",marginBottom:\"20\",marginLeft:\"100px\"},children:[\"Porfavor Escoger los Articulos del Catalogo para la Compra. \",/*#__PURE__*/_jsx(\"br\",{}),\"Cerciorarse No comprar Producto ya Existente en tu Comercio\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-container\",children:this.state.listaProductosCategoria.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{class:\"styleProduct\",children:[/*#__PURE__*/_jsx(Checkbox,{name:item.nombreProducto,value:item.idProducto//onCheck={this.props.value}\n,checked:item.checked,onChange:_this4.changeEvent.bind(_this4)}),item.nombreProducto]});})})]}),/*#__PURE__*/_jsxs(\"label\",{style:{fontFamily:\"fantasy\",fontSize:35,marginLeft:\"100px\"},children:[\"ID Productos en proceso de compra\",JSON.stringify(this.state.optionsChecked)]}),/*#__PURE__*/_jsx(\"div\",{style:{fontFamily:\"fantasy\",fontSize:45,height:50,width:500,marginLeft:\"100px\"// marginRight: \"1300px\"\n},children:/*#__PURE__*/_jsx(Button,{onClick:this.handleBuy.bind(this),size:\"large\",variant:\"contained\",children:\"COMPRA PRODUCTO\"})}),/*#__PURE__*/_jsx(\"label\",{style:{fontSize:45,fontFamily:\"fantasy\",marginTop:\"60px\",marginLeft:\"100px\"},children:\"Subir al Catalogo Producto de tu Comercio\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"20px\",marginLeft:\"100px\",marginRight:\"150px\"},children:/*#__PURE__*/_jsxs(BootstrapTable// data={}\n,{striped:true,hover:true,insertRow:true,selectRow:selectRow//  exportCSV\n// deleteRow={true}\n,cellEdit:cellEdit,options:options,children:[/*#__PURE__*/_jsx(TableHeaderColumn,{width:\"140\",isKey:true,hidden:true,dataField:\"id\",autoValue:true// isKey={true}\n// hiddenOnInsert\n,children:\"IdProducto\"}),/*#__PURE__*/_jsx(TableHeaderColumn,{width:\"140\"//  editable={false}\n,dataField:\"idCategoriaProducto\",editable:{type:\"select\",options:{values:productCategoria}},children:\"Id Categoria Producto\"}),/*#__PURE__*/_jsx(TableHeaderColumn,{width:\"140\",dataField:\"nombreProducto\"// hiddenOnInsert\n// editable={false}\n,children:\"Nombre Producto\"}),/*#__PURE__*/_jsx(TableHeaderColumn,{hiddenOnInsert:true,width:\"150\",dataField:\"imagenProducto\",dataFormat:this.buttonImageUpload.bind(this)// hiddenOnInsert\n// editable={false}\n,children:\"Imagen Producto\"})]})}),/*#__PURE__*/_jsx(\"div\",{})]});}}]);return productShop;}(Component);export default productShop;","map":{"version":3,"sources":["/Users/andrescampovalencia/Desktop/S_Proyectos/BackupShop2/13Dic2020 EcommerceAdmin/client/src/components/vistas/productShop.js"],"names":["React","Component","Select","Axios","Header","Checkbox","Button","BootstrapTable","TableHeaderColumn","Progress","listaCategorias","label","value","selectRow","mode","clickToSelect","cellEdit","blurToSave","productCategoria","productShop","props","handleChange","selectedOption","setState","console","log","a","b","idLista","id","urlA","post","then","res","listaProductosCategoria","data","catch","e","handleBuy","alert","preventDefault","productsChecked","state","optionsChecked","numProductsChecked","length","url","productsB","auth","lenght","fileSelectedHandler","event","target","files","selectedFile","fileUploadHandler","formData","FormData","idProducto","map","item","idUltimo","append","set","headers","onUploadProgress","progressEvent","setUploadPorcentage","parseInt","Math","round","loaded","total","evento","setUploadFile","productUpload","bind","fetch","json","row","cellName","cellValue","newRowStr","prop","CategoriaProducto","idCategoriaProducto","nombreProducto","checkedArray","selectedValue","name","checked","push","valueIndex","indexOf","splice","width","height","borderWidth","margin","options","afterTableComplete","handleTableComplete","afterDeleteRow","handleDeletedRow","afterInsertRow","handleInsertedRow","fontSize","fontFamily","alignContent","marginTop","marginLeft","marginBottom","changeEvent","JSON","stringify","marginRight","type","values","buttonImageUpload"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Select from \"react-select\";\nimport Axios from \"axios\";\nimport Header from \"../HeaderDash\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Button from \"@material-ui/core/Button\";\nimport { BootstrapTable, TableHeaderColumn } from \"react-bootstrap-table\";\nimport \"./productShop.css\";\nimport Progress from \"../progress\";\nconst listaCategorias = [\n  { label: \"Comida\", value: \"1\" },\n  { label: \"UtenciliosEscolares\", value: \"2\" },\n  { label: \"UtenciliosElectronicos\", value: \"3\" },\n  { label: \"Vestuario\", value: \"4\" },\n  { label: \"Calzado\", value: \"5\" },\n  { label: \"Bebida\", value: \"6\" },\n  { label: \"Productos para el hogar\", value: \"7\" },\n  { label: \"Juguetes\", value: \"8\" }\n];\n\n// Start Functions of the Table\nconst selectRow = {\n  mode: \"radio\",\n  clickToSelect: true\n};\nconst cellEdit = {\n  mode: \"dbclick\",\n  blurToSave: true\n\n  // beforeSaveCell: onBeforeSaveCell, // a hook for before saving cell\n  // afterSaveCell: onAfterSaveCell\n};\nconst productCategoria = [\n  \"Comida\",\n  \"UtenciliosEscolares\",\n  \"UtenciliosElectronicos\",\n  \"Vestuario\",\n  \"Calzado\",\n  \"Bebida\",\n  \"Productos para el hogar\",\n  \"Juguetes\"\n];\n\nclass productShop extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: \" \",\n      listaProductosCategoria: [],\n      optionsChecked: [],\n      evento: [],\n      selectedFile: null,\n      setUploadPorcentage: 0,\n      setUploadFile: \"\",\n      productUpload: \"\",\n      idProducto: \"\"\n    };\n    this.handleBuy = this.handleBuy.bind(this);\n  }\n\n  componentDidMount() {\n    fetch(\"/maxIdProduct\")\n      .then(res => res.json())\n      .then(idProducto =>\n        this.setState({ idProducto }, () =>\n          console.log(\"maxIdProduct fetched...\", idProducto)\n        )\n      );\n  }\n\n  handleInsertedRow(row, cellName, cellValue) {\n    let newRowStr = \" \";\n    for (const prop in row) {\n      newRowStr += prop + \": \" + row[prop] + \" \\n\";\n    }\n\n    alert(\"El Nuevo Producto En Catalogo de la Plataforma :\\n\" + newRowStr);\n\n    var CategoriaProducto =\n      row.idCategoriaProducto === \"Comida\"\n        ? 1\n        : row.idCategoriaProducto === \"UtenciliosEscolares\"\n        ? 2\n        : row.idCategoriaProducto === \"UtenciliosElectronicos\"\n        ? 3\n        : row.idCategoriaProducto === \"Vestuario\"\n        ? 4\n        : row.idCategoriaProducto === \"Calzado\"\n        ? 5\n        : row.idCategoriaProducto === \"Bebida\"\n        ? 6\n        : row.idCategoriaProducto === \"Productos para el hogar\"\n        ? 7\n        : 8;\n\n    // Send Info to Server\n\n    const url = \"/storeProductUpload\";\n    const productUpload = {\n      idCategoriaProducto: CategoriaProducto,\n      nombreProducto: row.nombreProducto\n    };\n\n    console.log(\"Productos enviados al server\" + productUpload);\n\n    // alert(\n    //   \"Su producto ya se encuentra en InfoProducto \\n\" +\n    //     \" Proceder a subir imagen para completar el proceso\"\n    // );\n\n    Axios.post(url, productUpload)\n\n      .then(res => {\n        if (res) {\n          console.log(\"Respuesta del Servidor Form\" + res.data);\n        }\n        console.log(\"No Respuesta del Servidor Form\" + res.data);\n      })\n      .catch(e => {});\n  }\n\n  // Class that handle Selection Categories Products\n  handleChange = selectedOption => {\n    this.setState({ selectedOption });\n    console.log(`Option selected:`, selectedOption);\n    let a = selectedOption.label;\n    let b = selectedOption.value;\n    console.log(`Option a label:`, a, \" // \", \"Option b value or id:\", b);\n\n    const idLista = {\n      label: a,\n      id: b\n    };\n\n    const urlA = \"/categoriaProducto\";\n    Axios.post(urlA, idLista)\n      .then(res => {\n        console.log(\"desde handle\", res);\n        this.setState({ listaProductosCategoria: res.data });\n      })\n      .catch(e => {\n        //\n      });\n  };\n\n  // Function that handle input from the values of checkboxes\n\n  changeEvent(event) {\n    let checkedArray = this.state.optionsChecked;\n    let selectedValue = event.target.value;\n    let name = event.target.name;\n    if (event.target.checked === true) {\n      checkedArray.push(selectedValue);\n      this.setState({\n        optionsChecked: checkedArray\n      });\n    } else {\n      let valueIndex = checkedArray.indexOf(selectedValue);\n      checkedArray.splice(valueIndex, 1);\n\n      this.setState({\n        optionsChecked: checkedArray\n      });\n    }\n  }\n\n  // Function that gets list of products and send it to the server\n\n  handleBuy = e => {\n    alert(\"Deseas realizar la compra de estos Productos ? \");\n    e.preventDefault();\n    const productsChecked = this.state.optionsChecked;\n    const numProductsChecked = this.state.optionsChecked.length;\n\n    if (numProductsChecked > 0) {\n      const url = \"/buyProduct\";\n      console.log(\"desde If handle buy\", productsChecked);\n      const productsB = {\n        productsB: productsChecked\n      };\n\n      Axios.post(url, productsB)\n        .then(res => {\n          const auth = res.data;\n          console.log(\"Respuesta de axios\" + auth.lenght);\n        })\n        .catch(e => {\n          //handle your errors\n        });\n      alert(\n        \"Compra  Realizada\" +\n          \"\\nPorfavor Ingrese en la pestaña Options a InfoProducto para continuar el proceso..\"\n      );\n      this.setState({\n        optionsChecked: [],\n        listaProductosCategoria: []\n      });\n    } else {\n      alert(\"Compra  No Realizada\" + \"\\nPorfavor inicie de nuevo el proceso..\");\n      this.setState({\n        optionsChecked: [],\n        listaProductosCategoria: []\n      });\n    }\n  };\n\n  fileSelectedHandler = event => {\n    console.log(\"el fileSelectedHandler\" + event.target.files[0]);\n\n    this.setState({\n      selectedFile: event.target.files[0]\n    });\n  };\n\n  fileUploadHandler = () => {\n    const formData = new FormData();\n\n    let url =\n      \"http://andresteccorp.club/TesisAndres/imagenUploadsProductos.php\";\n\n    // get the idProducto from DB\n\n    var idProducto = this.state.idProducto.map(function(item) {\n      return item.idUltimo + 1;\n    });\n    console.log(\"desde fileUploadHandler\" + idProducto);\n    formData.append(\"fileImageProducto\", this.state.selectedFile);\n\n    formData.set(\"idProducto\", idProducto);\n\n    Axios.post(url, formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      },\n\n      onUploadProgress: progressEvent => {\n        this.setState({\n          setUploadPorcentage: parseInt(\n            Math.round((progressEvent.loaded * 100) / progressEvent.total)\n          )\n        });\n        // clear percentage\n        //setTimeout(()=> setUploadPorcentage(0),10000);\n      }\n    })\n\n      .then(res => {\n        console.log(\"Respuesta del Servidor Form\" + res.data);\n      })\n      .catch(e => {\n        //handle your errors\n      });\n  };\n\n  buttonImageUpload() {\n    return (\n      <div className=\"d-flex flex-column\">\n        <input type=\"file\" name=\"file\" onChange={this.fileSelectedHandler} />\n        <button onClick={() => this.fileUploadHandler()}>UploadFile</button>\n        <div\n          style={{\n            width: 150,\n            height: 25,\n            borderWidth: 1,\n            margin: 10\n          }}\n        >\n          <Progress percentage={this.state.setUploadPorcentage} />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { selectedOption } = this.state;\n\n    const options = {\n      afterTableComplete: this.handleTableComplete,\n      afterDeleteRow: this.handleDeletedRow,\n      afterInsertRow: this.handleInsertedRow\n    };\n    return (\n      <div className=\"app\">\n        <Header\n          title1=\"Informacion / Compra de Productos \"\n          title2=\"Home\"\n          ruta=\"/homeAdmin\"\n          opcion1=\"InfoProducto\"\n          rutaOpcion1=\"/tableProd\"\n          opcion2=\"opcion2\"\n          opcion3=\"opcion3\"\n        />\n        <div\n          style={{\n            fontSize: 35,\n            fontFamily: \"fantasy\",\n            alignContent: \"center\",\n            marginTop: \"20px\"\n          }}\n          className=\"container\"\n        >\n          <Select\n            value={selectedOption}\n            options={listaCategorias}\n            onChange={this.handleChange}\n          />\n        </div>\n\n        <div>\n          <label\n            style={{\n              fontSize: 60,\n              fontFamily: \"fantasy\",\n              marginTop: \"50px\",\n              marginLeft: \"100px\"\n            }}\n          >\n            Articulos Disponibles\n          </label>\n          <br />\n          <label\n            style={{\n              fontSize: 20,\n              fontFamily: \"fantasy\",\n              marginBottom: \"20\",\n              marginLeft: \"100px\"\n            }}\n          >\n            Porfavor Escoger los Articulos del Catalogo para la Compra. <br />\n            Cerciorarse No comprar Producto ya Existente en tu Comercio\n          </label>\n          <br />\n\n          <div class=\"grid-container\">\n            {this.state.listaProductosCategoria.map(item => (\n              <div class=\"styleProduct\">\n                <Checkbox\n                  name={item.nombreProducto}\n                  value={item.idProducto}\n                  //onCheck={this.props.value}\n                  checked={item.checked}\n                  onChange={this.changeEvent.bind(this)}\n                />\n                {item.nombreProducto}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <label\n          style={{\n            fontFamily: \"fantasy\",\n            fontSize: 35,\n            marginLeft: \"100px\"\n          }}\n        >\n          ID Productos en proceso de compra\n          {JSON.stringify(this.state.optionsChecked)}\n        </label>\n        <div\n          style={{\n            fontFamily: \"fantasy\",\n            fontSize: 45,\n            height: 50,\n            width: 500,\n            marginLeft: \"100px\"\n            // marginRight: \"1300px\"\n          }}\n        >\n          <Button\n            onClick={this.handleBuy.bind(this)}\n            size=\"large\"\n            variant=\"contained\"\n          >\n            COMPRA PRODUCTO\n          </Button>\n        </div>\n        <label\n          style={{\n            fontSize: 45,\n            fontFamily: \"fantasy\",\n            marginTop: \"60px\",\n            marginLeft: \"100px\"\n          }}\n        >\n          Subir al Catalogo Producto de tu Comercio\n        </label>\n        <div\n          style={{\n            marginTop: \"20px\",\n            marginLeft: \"100px\",\n            marginRight: \"150px\"\n          }}\n        >\n          <BootstrapTable\n            // data={}\n            striped\n            hover\n            insertRow={true}\n            selectRow={selectRow}\n            //  exportCSV\n            // deleteRow={true}\n            cellEdit={cellEdit}\n            options={options}\n          >\n            <TableHeaderColumn\n              width=\"140\"\n              isKey\n              hidden\n              dataField=\"id\"\n              autoValue={true}\n              // isKey={true}\n\n              // hiddenOnInsert\n            >\n              IdProducto\n            </TableHeaderColumn>\n            <TableHeaderColumn\n              width=\"140\"\n              //  editable={false}\n\n              dataField=\"idCategoriaProducto\"\n              editable={{\n                type: \"select\",\n                options: { values: productCategoria }\n              }}\n            >\n              Id Categoria Producto\n            </TableHeaderColumn>\n            <TableHeaderColumn\n              width=\"140\"\n              dataField=\"nombreProducto\"\n              // hiddenOnInsert\n              // editable={false}\n            >\n              Nombre Producto\n            </TableHeaderColumn>\n            <TableHeaderColumn\n              hiddenOnInsert\n              width=\"150\"\n              dataField=\"imagenProducto\"\n              dataFormat={this.buttonImageUpload.bind(this)}\n\n              // hiddenOnInsert\n              // editable={false}\n            >\n              Imagen Producto\n            </TableHeaderColumn>\n          </BootstrapTable>\n        </div>\n        <div />\n      </div>\n    );\n  }\n}\n\nexport default productShop;\n"]},"metadata":{},"sourceType":"module"}