{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/andrescampovalencia/Desktop/S_Proyectos/BackupShop2/13Dic2020 EcommerceAdmin/client/src/components/vistas/storeInfo.js\";\nimport React, { Component } from \"react\";\nimport { BootstrapTable, TableHeaderColumn } from \"react-bootstrap-table\";\nimport Axios from \"axios\";\nimport Header from \"../HeaderDash\";\nimport Progress from \"../progress\"; // https://www.js-tutorials.com/nodejs-tutorial/nodejs-example-upload-store-image-mysql-express-js/\n\nconst cellEdit = {\n  mode: \"dbclick\",\n  blurToSave: true,\n  afterSaveCell: onAfterSaveCell\n}; // Start Crud Update Table Commercio\n\nfunction onAfterSaveCell(row, cellName, cellValue) {\n  alert(`Save column ${cellName} with value ${cellValue}`);\n  console.log(cellName);\n  console.log(cellValue);\n  console.log(row.idComercio);\n  let rowStr = \"\";\n\n  for (const prop in row) {\n    rowStr += prop + \": \" + row[prop] + \"\\n\";\n  } // alert(\"The updated row :\\n\" + rowStr);\n\n\n  alert(\"Updated Column with id : \" + row.idComercio);\n  const column = cellName;\n  const value = cellValue;\n  const id = row.idComercio;\n  const urlA = \"/updateCommerceInfo\"; // table comercio\n\n  const updateComercio = {\n    column: column,\n    value: value,\n    id: id\n  };\n  Axios.post(urlA, updateComercio).then(res => {//\n  }).catch(e => {//handle your errors\n  });\n}\n\nclass storeInfo extends Component {\n  constructor() {\n    super();\n\n    this.fileSelectedHandler = event => {\n      console.log(\"Desde FSH\" + event.target.files[0]);\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.fileUploadHandler = () => {\n      const formData = new FormData();\n      const setUploadPorcentage = this.state.setUploadPorcentage;\n      let url = \"http://andresteccorp.club/TesisAndres/imagenUploadsComercio.php\"; // get the idComercio\n\n      var idComercio = this.state.comercio.map(function (item) {\n        return item.idComercio;\n      });\n      formData.append(\"fileImageComercio\", this.state.selectedFile);\n      formData.set(\"idComercio\", idComercio);\n      console.log(\"Desde FUH\" + idComercio, formData);\n      Axios.post(url, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        },\n        onUploadProgress: progressEvent => {\n          this.setState({\n            setUploadPorcentage: parseInt(Math.round(progressEvent.loaded * 100 / progressEvent.total))\n          }); //this.componentDidMount();\n          // clear percentage\n          //setTimeout(()=> setUploadPorcentage(0),10000);\n        }\n      }).then(res => {\n        const auth = res.data;\n        console.log(\"auth----\" + auth); // console.log(\"auth----\" + auth.length);\n\n        if (auth) {\n          alert(\"Imagen subida Satisfactoriamente\");\n        }\n\n        if (this.state.setUploadPorcentage == 100) {\n          this.componentDidMount();\n        } else {\n          alert(\"Problemas en Subir Imagen\" + \"\\nTratar de Nuevo\");\n        }\n      }).catch(e => {//handle your errors\n      });\n    };\n\n    this.state = {\n      comercio: [],\n      selectedFile: null,\n      setUploadPorcentage: 0,\n      setUploadFile: \"\"\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"/commerceInfo\").then(res => res.json()).then(comercio => this.setState({\n      comercio\n    }, () => console.log(\"Comercio fetched...\", comercio)));\n  } // uploadImg\n\n\n  render() {\n    const options = {\n      afterTableComplete: this.handleTableComplete\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        title1: \" Administrator Informacion\",\n        title2: \"Home\",\n        ruta: \"/homeAdmin\",\n        opcion1: \"Exit\",\n        rutaOpcion1: \"\",\n        opcion2: \"opcion2\",\n        opcion3: \"opcion3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: 60,\n              fontFamily: \"fantasy\",\n              marginTop: \"30px\",\n              marginLeft: \"350px\"\n            },\n            children: \"Comercio Informacion\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            children: this.state.comercio.map(comercio => /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                marginTop: \"30px\",\n                marginBottom: \"30px\",\n                marginLeft: \"120px\",\n                marginRight: \"50px\",\n                justifyContent: \"center\",\n                alignItems: \"center\"\n              },\n              width: 400,\n              height: 400,\n              src: comercio.imagenComercio,\n              alt: \"Card image cap\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              width: 250,\n              height: 25,\n              borderWidth: 1,\n              margin: 10\n            },\n            children: this.state.setUploadFile.fileName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 200,\n            height: 25,\n            borderWidth: 5,\n            margin: 10\n          },\n          children: /*#__PURE__*/_jsxDEV(Progress, {\n            percentage: this.state.setUploadPorcentage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 150,\n            height: 150,\n            borderWidth: 1,\n            margin: 10,\n            flexDirection: \"row\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              display: \"none\"\n            },\n            type: \"file\",\n            onChange: this.fileSelectedHandler,\n            ref: fileInput => this.fileInput = fileInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              width: 200,\n              height: 55,\n              fontSize: 20,\n              borderRadius: 25,\n              paddingHorizontal: 30,\n              paddingVertical: 5,\n              fontWeight: \"500\",\n              background: \"#BDC3C7\"\n            },\n            onClick: () => this.fileInput.click(),\n            children: \"Pick file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              width: 200,\n              height: 55,\n              fontSize: 20,\n              borderRadius: 25,\n              paddingHorizontal: 30,\n              paddingVertical: 5,\n              fontWeight: \"500\",\n              background: \"#BDC3C7\"\n            },\n            onClick: this.fileUploadHandler,\n            children: \"Subir imagen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: \"50px\",\n            marginLeft: \"150px\",\n            marginRight: \"150px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(BootstrapTable, {\n            data: this.state.comercio,\n            striped: true,\n            cellEdit: cellEdit,\n            options: options,\n            children: [/*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n              width: \"150\",\n              dataField: \"idComercio\",\n              isKey: true,\n              children: \"Id Comercio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n              width: \"150\",\n              dataField: \"correoComercio\",\n              children: \"Correo Comercio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n              width: \"150\",\n              dataField: \"direccionComercio\",\n              children: \"Direccion Comercio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n              width: \"150\",\n              dataField: \"nombreTienda\",\n              children: \"Nombre Comercio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n              width: \"150\",\n              dataField: \"detalleComercio\",\n              children: \"Detalle Comercio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n              width: \"150\",\n              dataField: \"telefonoComercio\",\n              children: \"Telefono Comercio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default storeInfo;","map":{"version":3,"sources":["/Users/andrescampovalencia/Desktop/S_Proyectos/BackupShop2/13Dic2020 EcommerceAdmin/client/src/components/vistas/storeInfo.js"],"names":["React","Component","BootstrapTable","TableHeaderColumn","Axios","Header","Progress","cellEdit","mode","blurToSave","afterSaveCell","onAfterSaveCell","row","cellName","cellValue","alert","console","log","idComercio","rowStr","prop","column","value","id","urlA","updateComercio","post","then","res","catch","e","storeInfo","constructor","fileSelectedHandler","event","target","files","setState","selectedFile","fileUploadHandler","formData","FormData","setUploadPorcentage","state","url","comercio","map","item","append","set","headers","onUploadProgress","progressEvent","parseInt","Math","round","loaded","total","auth","data","componentDidMount","setUploadFile","fetch","json","render","options","afterTableComplete","handleTableComplete","fontSize","fontFamily","marginTop","marginLeft","marginBottom","marginRight","justifyContent","alignItems","imagenComercio","width","height","borderWidth","margin","fileName","flexDirection","display","fileInput","borderRadius","paddingHorizontal","paddingVertical","fontWeight","background","click"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { BootstrapTable, TableHeaderColumn } from \"react-bootstrap-table\";\nimport Axios from \"axios\";\nimport Header from \"../HeaderDash\";\nimport Progress from \"../progress\";\n\n// https://www.js-tutorials.com/nodejs-tutorial/nodejs-example-upload-store-image-mysql-express-js/\n\nconst cellEdit = {\n  mode: \"dbclick\",\n  blurToSave: true,\n  afterSaveCell: onAfterSaveCell\n};\n\n// Start Crud Update Table Commercio\nfunction onAfterSaveCell(row, cellName, cellValue) {\n  alert(`Save column ${cellName} with value ${cellValue}`);\n  console.log(cellName);\n  console.log(cellValue);\n  console.log(row.idComercio);\n  let rowStr = \"\";\n  for (const prop in row) {\n    rowStr += prop + \": \" + row[prop] + \"\\n\";\n  }\n  // alert(\"The updated row :\\n\" + rowStr);\n  alert(\"Updated Column with id : \" + row.idComercio);\n\n  const column = cellName;\n  const value = cellValue;\n  const id = row.idComercio;\n  const urlA = \"/updateCommerceInfo\"; // table comercio\n  const updateComercio = {\n    column: column,\n    value: value,\n    id: id\n  };\n\n  Axios.post(urlA, updateComercio)\n    .then(res => {\n      //\n    })\n    .catch(e => {\n      //handle your errors\n    });\n}\n\nclass storeInfo extends Component {\n  constructor() {\n    super();\n    this.state = {\n      comercio: [],\n\n      selectedFile: null,\n      setUploadPorcentage: 0,\n      setUploadFile: \"\"\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"/commerceInfo\")\n      .then(res => res.json())\n      .then(comercio =>\n        this.setState({ comercio }, () =>\n          console.log(\"Comercio fetched...\", comercio)\n        )\n      );\n  }\n\n  // uploadImg\n  fileSelectedHandler = event => {\n    console.log(\"Desde FSH\" + event.target.files[0]);\n\n    this.setState({\n      selectedFile: event.target.files[0]\n    });\n  };\n\n  fileUploadHandler = () => {\n    const formData = new FormData();\n    const setUploadPorcentage = this.state.setUploadPorcentage;\n    let url = \"http://andresteccorp.club/TesisAndres/imagenUploadsComercio.php\";\n\n    // get the idComercio\n\n    var idComercio = this.state.comercio.map(function(item) {\n      return item.idComercio;\n    });\n\n    formData.append(\"fileImageComercio\", this.state.selectedFile);\n\n    formData.set(\"idComercio\", idComercio);\n    console.log(\"Desde FUH\" + idComercio, formData);\n    Axios.post(url, formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      },\n\n      onUploadProgress: progressEvent => {\n        this.setState({\n          setUploadPorcentage: parseInt(\n            Math.round((progressEvent.loaded * 100) / progressEvent.total)\n          )\n        });\n\n        //this.componentDidMount();\n        // clear percentage\n        //setTimeout(()=> setUploadPorcentage(0),10000);\n      }\n    })\n\n      .then(res => {\n        const auth = res.data;\n\n        console.log(\"auth----\" + auth);\n\n        // console.log(\"auth----\" + auth.length);\n        if (auth) {\n          alert(\"Imagen subida Satisfactoriamente\");\n        }\n        if (this.state.setUploadPorcentage == 100) {\n          this.componentDidMount();\n        } else {\n          alert(\"Problemas en Subir Imagen\" + \"\\nTratar de Nuevo\");\n        }\n      })\n      .catch(e => {\n        //handle your errors\n      });\n  };\n\n  render() {\n    const options = {\n      afterTableComplete: this.handleTableComplete\n    };\n\n    return (\n      <div>\n        <Header\n          title1=\"\n          Administrator Informacion\"\n          title2=\"Home\"\n          ruta=\"/homeAdmin\"\n          opcion1=\"Exit\"\n          rutaOpcion1=\"\"\n          opcion2=\"opcion2\"\n          opcion3=\"opcion3\"\n        />\n\n        <div>\n          <div>\n            <h3\n              style={{\n                fontSize: 60,\n                fontFamily: \"fantasy\",\n                marginTop: \"30px\",\n                marginLeft: \"350px\"\n              }}\n            >\n              Comercio Informacion\n            </h3>\n          </div>\n\n          <div>\n            <ul>\n              {this.state.comercio.map(comercio => (\n                <img\n                  style={{\n                    marginTop: \"30px\",\n                    marginBottom: \"30px\",\n                    marginLeft: \"120px\",\n                    marginRight: \"50px\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\"\n                  }}\n                  width={400}\n                  height={400}\n                  src={comercio.imagenComercio}\n                  alt=\"Card image cap\"\n                />\n              ))}\n            </ul>\n\n            <h3\n              style={{\n                width: 250,\n                height: 25,\n                borderWidth: 1,\n                margin: 10\n              }}\n            >\n              {this.state.setUploadFile.fileName}\n            </h3>\n          </div>\n\n          <div\n            style={{\n              width: 200,\n              height: 25,\n              borderWidth: 5,\n              margin: 10\n            }}\n          >\n            <Progress percentage={this.state.setUploadPorcentage} />\n          </div>\n\n          <div\n            style={{\n              width: 150,\n              height: 150,\n              borderWidth: 1,\n              margin: 10,\n              flexDirection: \"row\"\n            }}\n          >\n            <input\n              style={{ display: \"none\" }}\n              type=\"file\"\n              onChange={this.fileSelectedHandler}\n              ref={fileInput => (this.fileInput = fileInput)}\n            />\n            <button\n              style={{\n                width: 200,\n                height: 55,\n\n                fontSize: 20,\n                borderRadius: 25,\n                paddingHorizontal: 30,\n                paddingVertical: 5,\n                fontWeight: \"500\",\n                background: \"#BDC3C7\"\n              }}\n              onClick={() => this.fileInput.click()}\n            >\n              Pick file\n            </button>\n            <button\n              style={{\n                width: 200,\n                height: 55,\n                fontSize: 20,\n                borderRadius: 25,\n                paddingHorizontal: 30,\n                paddingVertical: 5,\n                fontWeight: \"500\",\n                background: \"#BDC3C7\"\n              }}\n              onClick={this.fileUploadHandler}\n            >\n              Subir imagen\n            </button>\n          </div>\n\n          <div\n            style={{\n              marginTop: \"50px\",\n              marginLeft: \"150px\",\n              marginRight: \"150px\"\n            }}\n          >\n            <BootstrapTable\n              data={this.state.comercio}\n              striped\n              cellEdit={cellEdit}\n              options={options}\n            >\n              <TableHeaderColumn\n                width=\"150\"\n                dataField=\"idComercio\"\n                isKey={true}\n              >\n                Id Comercio\n              </TableHeaderColumn>\n              <TableHeaderColumn width=\"150\" dataField=\"correoComercio\">\n                Correo Comercio\n              </TableHeaderColumn>\n              <TableHeaderColumn width=\"150\" dataField=\"direccionComercio\">\n                Direccion Comercio\n              </TableHeaderColumn>\n\n              <TableHeaderColumn width=\"150\" dataField=\"nombreTienda\">\n                Nombre Comercio\n              </TableHeaderColumn>\n              <TableHeaderColumn width=\"150\" dataField=\"detalleComercio\">\n                Detalle Comercio\n              </TableHeaderColumn>\n              <TableHeaderColumn width=\"150\" dataField=\"telefonoComercio\">\n                Telefono Comercio\n              </TableHeaderColumn>\n            </BootstrapTable>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default storeInfo;\n"]},"metadata":{},"sourceType":"module"}